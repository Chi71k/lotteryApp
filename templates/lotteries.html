<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lotteries</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body style="height: auto;">
    <div class="navbar">
        <a href="/draws">Draws</a>
        <a href="/lotteries">Lotteries</a>
        <a href="/profile">Profile</a>
        <a href="/logout">Logout</a>
    </div>
    <div class="container">
        <h1>Available Lotteries</h1>

        <!-- Show the Create New Lottery link only for admin -->
        {{if eq .Username "admin"}}
        <a href="/lotteries/create">Create New Lottery</a>
        {{end}}

        <div class="lotteries">
            {{range .Lotteries}}
            <div class="lottery">
                <h2>{{.Name}}</h2>
                <p>{{.Description}}</p>
                <p>Price: ${{.Price}}</p>
                <p>Ends on: {{.EndDate.Format "2006-01-02"}}</p>
                <p>Choose 6 numbers (1-49):</p>
                <form method="post" action="/buy">
                    <input type="hidden" name="lottery_id" value="{{.ID}}">
                    <input type="text" name="chosen_numbers" placeholder="e.g. 5,12,23,34,41,47" required>
                    <button type="submit">Buy Ticket</button>
                    {{if eq $.Username "admin"}}
                        <a href="/lotteries/update?id={{.ID}}">Edit</a>
                        <a href="/lotteries/delete?id={{.ID}}">Delete</a>
                    {{end}}
                </form>
            </div>
            {{end}}
        </div>
    </div>
    {{if .Error}}
<script>
	alert("{{.Error}}");
</script>
{{end}}

</body>
</html>
